<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .card {
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .table img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .btn {
            border-radius: 0.5rem;
        }
    </style>
</head>

<body>
    <div th:replace="~{fragments :: header}"></div>
    <div class="container py-5">
        <h2 class="text-center mb-4 fw-bold text-primary">Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>

        <!-- Form th√™m/s·ª≠a s·∫£n ph·∫©m -->
        <div class="card p-4 mb-5">
            <form th:action="@{/admin/products/save}" th:object="${product}" method="post">
                <div class="row g-3">
                    <input type="hidden" th:field="*{productId}">
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">T√™n s·∫£n ph·∫©m</label>
                        <input type="text" class="form-control" th:field="*{productName}"
                            placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-semibold">Gi√°</label>
                        <input type="number" step="0.01" class="form-control" th:field="*{price}" placeholder="0.00"
                            required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-semibold">Gi√° khuy·∫øn m√£i</label>
                        <input type="number" step="0.01" class="form-control" th:field="*{discountPrice}">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-semibold">S·ªë l∆∞·ª£ng</label>
                        <input type="number" class="form-control" th:field="*{stockQuantity}" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-semibold">Danh m·ª•c ID</label>
                        <input type="number" class="form-control" th:field="*{categoryId}" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">·∫¢nh (URL)</label>
                        <input type="text" class="form-control" th:field="*{imageUrl}" placeholder="https://...">
                    </div>
                    <div class="col-12">
                        <label class="form-label fw-semibold">M√¥ t·∫£</label>
                        <textarea class="form-control" th:field="*{description}" rows="2"></textarea>
                    </div>
                    <div class="col-12 mt-3">
                        <button type="submit" class="btn btn-primary px-4">üíæ L∆∞u s·∫£n ph·∫©m</button>
                        <a href="/admin/products" class="btn btn-secondary px-4">L√†m m·ªõi</a>
                    </div>
                </div>
            </form>
        </div>

        <!-- B·∫£ng danh s√°ch s·∫£n ph·∫©m -->
        <div class="card p-4">
            <h5 class="mb-3 fw-bold text-secondary">Danh s√°ch s·∫£n ph·∫©m</h5>
            <table class="table table-hover align-middle">
                <thead class="table-primary text-center">
                    <tr>
                        <th>ID</th>
                        <th>·∫¢nh</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>Gi√°</th>
                        <th>Gi·∫£m gi√°</th>
                        <th>T·ªìn kho</th>
                        <th>Thao t√°c</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="p : ${products}">
                        <td th:text="${p.productId}"></td>
                        <td><img th:src="${p.imageUrl}" alt="·∫¢nh s·∫£n ph·∫©m"></td>
                        <td th:text="${p.productName}"></td>
                        <td th:text="${#numbers.formatDecimal(p.price,1,2)} + ' ƒë'"></td>
                        <td
                            th:text="${p.discountPrice != null ? #numbers.formatDecimal(p.discountPrice,1,2) + ' ƒë' : '-'}">
                        </td>
                        <td th:text="${p.stockQuantity}"></td>
                        <td class="text-center">
                            <a th:href="@{'/admin/products/edit/' + ${p.productId}}" class="btn btn-warning btn-sm">‚úèÔ∏è
                                S·ª≠a</a>
                            <a th:href="@{'/admin/products/delete/' + ${p.productId}}" class="btn btn-danger btn-sm"
                                onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh√¥ng?')">üóë X√≥a</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>